<!doctype html>
                        <html lang="en">
                        <head>
	                        <meta charset="UTF-8">
	                        <title>		山西建造师注册中心及电子政务大厅  </title>
	                        <link href="../css/css.css" rel="stylesheet" /> 
                        </head>
                        <body> 
                        <ul><li>标题：		山西建造师注册中心及电子政务大厅  </li><li>作者：		<a href="http://www.wooyun.org/whitehats/_Evil">_Evil</a> 
</li><li>提交时间：		2012-07-15 14:43</li></ul>
                        <div class="con">
                        <h2>漏洞详情</h2>
		<h3 class="detailTitle">披露状态：</h3>
		<p class="detail" style="padding-bottom:0">
					</p>
		<p class="detail">
									2012-07-15：	细节已通知厂商并且等待厂商处理中<br/>
									2012-07-19：	厂商已经确认，细节仅向厂商公开<br/>
									2012-07-29：	细节向核心白帽子及相关领域专家公开<br/>
									2012-08-08：	细节向普通白帽子公开<br/>
									2012-08-18：	细节向实习白帽子公开<br/>
									2012-08-29：	细节向公众公开<br/>
					</p>
		<h3 class="detailTitle">简要描述：</h3>

		<p class="detail">为了国家尊严,为了人民利益,为了自己的良心</p>

				
						<h3 class="detailTitle">详细说明：</h3>
		
			<p class="detail">http://59.52.254.78/MCreditJx/cstper/reg/next.aspx<br />
<br />
<br />
<br />
注册抓包:<br />
<br />
发现<br />
<br />
http://59.52.254.78/MCreditJx/ajaxpro/ApproveWeb_scMain_next,App_Web_am-0jttv.ashx<br />
<br />
<br />
<br />
http://59.52.254.78/MCreditJx/cstper/reg/next.aspx<br />
<br />
<br />
<br />
<br />
<br />
修改攻击语句看看:<br />
<br />
</p><pre><code>null; r.error = {&quot;Message&quot;:&quot;字符串 &#039;440702199604054226&#039;&#039; 后的引号不完整。\r\n&#039;440702199604054226&#039;&#039; 附近有语法错误。&quot;,&quot;Type&quot;:&quot;System.Data.SqlClient.SqlException&quot;}</code></pre><p class='detail'><br />
<br />
<br />
<br />
</p><p class="detail"><a href="../images/14161133b0cc1f808373bdaad8be52115e9edff1.jpg" target="_blank"><img src="../images/14161133b0cc1f808373bdaad8be52115e9edff1.jpg" alt="" width="600"/></a></p><p class="detail"><br />
<br />
<br />
<br />
</p><p class="detail"><a href="../images/141611424953585cfaeb0d1233f4909df0c8157f.jpg" target="_blank"><img src="../images/141611424953585cfaeb0d1233f4909df0c8157f.jpg" alt="" width="600"/></a></p><p class="detail"><br />
<br />
<br />
<br />
&#039; and user&gt;0 看语句,最后工具跑下SA权限....... @_@ 我没有做任何破坏请查看记录我<br />
<br />
<br />
<br />
ip:14.209.148.21* </p>
				
									<h3 class="detailTitle">漏洞证明：</h3>

			<p class="detail">http://59.52.254.78/MCreditJx/cstper/reg/next.aspx<br />
<br />
<br />
<br />
注册抓包:<br />
<br />
发现<br />
<br />
http://59.52.254.78/MCreditJx/ajaxpro/ApproveWeb_scMain_next,App_Web_am-0jttv.ashx<br />
<br />
<br />
<br />
http://59.52.254.78/MCreditJx/cstper/reg/next.aspx<br />
<br />
<br />
<br />
<br />
<br />
修改攻击语句看看:<br />
<br />
</p><pre><code>null; r.error = {&quot;Message&quot;:&quot;字符串 &#039;440702199604054226&#039;&#039; 后的引号不完整。\r\n&#039;440702199604054226&#039;&#039; 附近有语法错误。&quot;,&quot;Type&quot;:&quot;System.Data.SqlClient.SqlException&quot;}</code></pre><p class='detail'><br />
<br />
<br />
<br />
</p><p class="detail"><a href="../images/14161133b0cc1f808373bdaad8be52115e9edff1.jpg" target="_blank"><img src="../images/14161133b0cc1f808373bdaad8be52115e9edff1.jpg" alt="" width="600"/></a></p><p class="detail"><br />
<br />
<br />
<br />
</p><p class="detail"><a href="../images/141611424953585cfaeb0d1233f4909df0c8157f.jpg" target="_blank"><img src="../images/141611424953585cfaeb0d1233f4909df0c8157f.jpg" alt="" width="600"/></a></p><p class="detail"><br />
<br />
<br />
<br />
&#039; and user&gt;0 看语句,最后工具跑下SA权限....... @_@ 我没有做任何破坏请查看记录我<br />
<br />
<br />
<br />
ip:14.209.148.21*<br />
<br />
<br />
<br />
网站架构很老了,请专业人员还有修复短文件又存在,请修改注册表修复 </p>

									<h3 class="detailTitle">修复方案：</h3>
			<p class="detail"><br />
<br />
网站架构很老了,请专业人员还有修复短文件又存在,请修改注册表修复<br />
<br />
<br />
<br />
--------------------------------------------------------------------------------<br />
<br />
<br />
<br />
Windows 关闭、开启短文件名功能：<br />
<br />
<br />
<br />
打开注册表，找到：HKLM\SYSTEM\CurrentControlSet\Control\FileSystem<br />
<br />
<br />
<br />
将 NtfsDisable8dot3NameCreation 的值设为 1，也就是不创建短文件名，具体含义如下：<br />
<br />
<br />
<br />
0    NTFS creates short file names. This setting enables applications that cannot process long file names and computers that use different code pages to find the files.<br />
<br />
<br />
<br />
1    NTFS does not create short file names. Although this setting increases file performance, applications that cannot process long file names and computers that use different code pages might not be able to find the files.<br />
<br />
<br />
<br />
具体说明在：http://technet.microsoft.com/en-us/library/cc959352.aspx <br />
<br />
<br />
<br />
<br />
<br />
 </p>
										<h3 class="detailTitle">版权声明：转载请注明来源 <a style="font-weight:normal" href="http://www.wooyun.org/whitehats/_Evil" title="_Evil">_Evil</a>@<a style="font-weight:normal" href="http://www.wooyun.org/bugs/wooyun-2010-09648" title="山西建造师注册中心及电子政务大厅">乌云</a></h3>
		<hr align="center"/>

				
			<h2>漏洞回应</h2>
			
			
															<h3 class="detailTitle">厂商回应：</h3>
						<p class="detail">危害等级：中</p>
						<p class="detail">漏洞Rank：7 </p>
													<p class="detail">确认时间：2012-07-19 16:15</p>
												<h3 class="detailTitle">厂商回复：</h3>				
						<p class="detail">CNVD未复现，先行根据图片确认，待复现后纳入处置流程。<br />
<br />
初步按部分影响机密性、完整性进行评估，rank 7。</p>
					

					
					
					<h3 class="detailTitle">最新状态：</h3>

											<p class="detail">暂无</p>
					

							
					
		
<hr align="center" />
<script type="text/javascript">
var bugid="9648";
var bugRating="-3";
var myRating="";
var ratingCount="0";



function ShowBugRating(k){
	var ratingItems=$(".myrating span");
	$.each(ratingItems,function(i,n){
		var nk=parseInt($(n).attr("rel"));
		if(nk<=k){
			$(n).addClass("on");
		}else{
			$(n).removeClass("on");
		}
	});
	$(".myrating span").hover(
		function(){
			$("#ratingShow").html($(this).attr("data-title"));
		},
		function(){
			$("#ratingShow").html("");
		}
	);
}
$(document).ready(function(){
	if(myRating==""){
		var ratingItems=$(".myrating span");
		$(".myrating span").hover(
			function(){
				$(this).addClass("hover");
				var k=parseInt($(this).attr("rel"));
				$.each(ratingItems,function(i,n){
					var nk=parseInt($(n).attr("rel"));
					if(nk<k) $(n).addClass("on");
					if(nk>k) $(n).removeClass("on");
				});
				$("#ratingShow").html($(this).attr("data-title"));
			},
			function(){
				$(this).removeClass("hover");
				if($("#myRating").val()==""){
					$.each(ratingItems,function(i,n){
						$(n).removeClass("on");
					});
				}
				$("#ratingShow").html("");
			}
		);

		$(".myrating span").click(function(){
			var rating=$(this).attr("rel");
			var k=parseInt($(this).attr("rel"));
			$.post("/ajaxdo.php?module=bugrating",{"id":bugid,"rating":rating,"token":$("#token").val()},function(re){
				//消除操作绑定
				$(".myrating span").unbind();
				re=parseInt(re);
				switch(re){
					case 1:
						$("#ratingShow").html("评分成功");
						$("#ratingSpan").html(parseInt($("#ratingSpan").html())+1);
						$.each(ratingItems,function(i,n){
							var nk=parseInt($(n).attr("rel"));
							if(nk<=k){
								$(n).addClass("on");
							}else{
								$(n).removeClass("on");
							}
						});
						ShowBugRating(rating);
						break;
					case 2:
						$("#ratingShow").html("请先登录");
						break;
					case 4:
						$("#ratingShow").html("已对此漏洞进行过评分");
						break;
					case 6:
						$("#ratingShow").html("不能对自己发布的漏洞进行评分");
						break;
					default:break;
				}
			});
		});
	}else{
		if(ratingCount>2){
			ShowBugRating(bugRating);
		}else{
			ShowBugRating(-3);
		}
	}
});

</script>
<h3 class="detailTitle">漏洞评价：</h3>
                        </div>
                        </body>
                        </html>
