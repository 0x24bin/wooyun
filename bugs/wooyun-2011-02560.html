<!doctype html>
                        <html lang="en">
                        <head>
	                        <meta charset="UTF-8">
	                        <title>		窝窝团敏感信息泄露  </title>
	                        <link href="../css/css.css" rel="stylesheet" /> 
                        </head>
                        <body> 
                        <ul><li>标题：		窝窝团敏感信息泄露  </li><li>作者：		<a href="http://www.wooyun.org/whitehats/路人甲">路人甲</a> 
</li><li>提交时间：		2011-07-24 20:56</li></ul>
                        <div class="con">
                        <h2>漏洞详情</h2>
		<h3 class="detailTitle">披露状态：</h3>
		<p class="detail" style="padding-bottom:0">
					</p>
		<p class="detail">
									2011-07-24：	积极联系厂商并且等待厂商认领中，细节不对外公开<br/>
									2011-07-28：	厂商已经主动忽略漏洞，细节向公众公开<br/>
					</p>
		<h3 class="detailTitle">简要描述：</h3>

		<p class="detail">mysql数据库</p>

				
						<h3 class="detailTitle">详细说明：</h3>
		
			<p class="detail">http://jiudian.55tuan.com/goods.do?method=selPastGoods&amp;conditionStr=%22%3E%3Cscript%3Ealert%28/%C7%E7%CC%EC%D0%A1%D6%FD/%29%3C/script%3E&amp;pageNo=0&amp;zoning=0%27 </p>
				
									<h3 class="detailTitle">漏洞证明：</h3>

			<p class="detail"></p><pre><code>com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: You have an error<br />
in your SQL syntax; check the manual that corresponds to your MySQL server<br />
version for the right syntax to use near &#039;-10,10&#039; at line 1<br />
<br />
javax.servlet.ServletException: org.springframework.jdbc.BadSqlGrammarException:<br />
SqlMapClient operation; bad SQL grammar []; nested exception is com.ibatis.common.jdbc.exception.NestedSQLException:<br />
<br />
--- The error occurred while applying a parameter map.  <br />
--- Check the selGoodsPagesByCondition-InlineParameterMap.  <br />
--- Check the statement (query failed).  <br />
--- Cause: com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: You have<br />
an error in your SQL syntax; check the manual that corresponds to your<br />
MySQL server version for the right syntax to use near &#039;-10,10&#039; at line<br />
1<br />
	at org.apache.struts.action.RequestProcessor.processException(RequestProcessor.java:523)<br />
	at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:421)<br />
	at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:224)<br />
	at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1194)<br />
	at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)<br />
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:119)<br />
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:96)<br />
	at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:109)<br />
	at com.caucho.filters.GzipFilter.doFilter(GzipFilter.java:149)<br />
	at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89)<br />
	at org.tuckey.web.filters.urlrewrite.RuleChain.handleRewrite(RuleChain.java:176)<br />
	at org.tuckey.web.filters.urlrewrite.RuleChain.doRules(RuleChain.java:145)<br />
	at org.tuckey.web.filters.urlrewrite.UrlRewriter.processRequest(UrlRewriter.java:92)<br />
	at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:381)<br />
	at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89)<br />
	at com.tuan.web.filter.WebLogFilter.doFilter(Unknown Source)<br />
	at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89)<br />
	at com.tuan.web.filter.IpMarkerFilter.doFilter(Unknown Source)<br />
	at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89)<br />
	at com.tuan.web.util.SetCharsetFilter.doFilter(Unknown Source)<br />
	at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89)<br />
	at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:184)<br />
	at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:95)<br />
	at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287)<br />
	at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:794)<br />
	at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:729)<br />
	at com.caucho.network.listen.TcpSocketLink.handleRequest(TcpSocketLink.java:688)<br />
	at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:668)<br />
	at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:616)<br />
	at com.caucho.network.listen.AcceptTask.doTask(AcceptTask.java:104)<br />
	at com.caucho.network.listen.ConnectionReadTask.runThread(ConnectionReadTask.java:98)<br />
	at com.caucho.network.listen.ConnectionReadTask.run(ConnectionReadTask.java:81)<br />
	at com.caucho.network.listen.AcceptTask.run(AcceptTask.java:67)<br />
	at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164)<br />
	at com.caucho.env.thread.ResinThread.run(ResinThread.java:130)<br />
Caused by: org.springframework.jdbc.BadSqlGrammarException: SqlMapClient<br />
operation; bad SQL grammar []; nested exception is com.ibatis.common.jdbc.exception.NestedSQLException:<br />
<br />
--- The error occurred while applying a parameter map.  <br />
--- Check the selGoodsPagesByCondition-InlineParameterMap.  <br />
--- Check the statement (query failed).  <br />
--- Cause: com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: You have<br />
an error in your SQL syntax; check the manual that corresponds to your<br />
MySQL server version for the right syntax to use near &#039;-10,10&#039; at line<br />
1<br />
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.translate(SQLErrorCodeSQLExceptionTranslator.java:276)<br />
	at org.springframework.orm.ibatis.SqlMapClientTemplate.execute(SqlMapClientTemplate.java:212)<br />
	at org.springframework.orm.ibatis.SqlMapClientTemplate.executeWithListResult(SqlMapClientTemplate.java:249)<br />
	at org.springframework.orm.ibatis.SqlMapClientTemplate.queryForList(SqlMapClientTemplate.java:296)<br />
	at com.jeehe.usercenter.dao.impl.GoodsDAOImpl.selGoodsPagesByCondition(Unknown Source)<br />
	at com.jeehe.usercenter.service.impl.GoodsServiceImpl.selGoodsPagesByCondition(Unknown Source)<br />
	at sun.reflect.GeneratedMethodAccessor819.invoke(Unknown Source)<br />
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br />
	at java.lang.reflect.Method.invoke(Method.java:597)<br />
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:310)<br />
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)<br />
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)<br />
	at org.springframework.remoting.support.RemoteInvocationTraceInterceptor.invoke(RemoteInvocationTraceInterceptor.java:70)<br />
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)<br />
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)<br />
	at $Proxy73.selGoodsPagesByCondition(Unknown Source)<br />
	at sun.reflect.GeneratedMethodAccessor818.invoke(Unknown Source)<br />
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br />
	at java.lang.reflect.Method.invoke(Method.java:597)<br />
	at org.springframework.remoting.support.RemoteInvocation.invoke(RemoteInvocation.java:205)<br />
	at org.springframework.remoting.support.DefaultRemoteInvocationExecutor.invoke(DefaultRemoteInvocationExecutor.java:38)<br />
	at org.springframework.remoting.support.RemoteInvocationBasedExporter.invoke(RemoteInvocationBasedExporter.java:78)<br />
	at org.springframework.remoting.rmi.RmiBasedExporter.invoke(RmiBasedExporter.java:72)<br />
	at org.springframework.remoting.rmi.RmiInvocationWrapper.invoke(RmiInvocationWrapper.java:72)<br />
	at sun.reflect.GeneratedMethodAccessor218.invoke(Unknown Source)<br />
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br />
	at java.lang.reflect.Method.invoke(Method.java:597)<br />
	at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:305)<br />
	at sun.rmi.transport.Transport$1.run(Transport.java:159)<br />
	at java.security.AccessController.doPrivileged(Native Method)<br />
	at sun.rmi.transport.Transport.serviceCall(Transport.java:155)<br />
	at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)<br />
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)<br />
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)<br />
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)<br />
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)<br />
	at java.lang.Thread.run(Thread.java:662)<br />
	at org.springframework.remoting.support.RemoteInvocationUtils.fillInClientStackTraceIfPossible(RemoteInvocationUtils.java:47)<br />
	at org.springframework.remoting.rmi.RmiClientInterceptor.doInvoke(RmiClientInterceptor.java:347)<br />
	at org.springframework.remoting.rmi.RmiClientInterceptor.invoke(RmiClientInterceptor.java:258)<br />
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)<br />
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)<br />
	at $Proxy39.selGoodsPagesByCondition(Unknown Source)<br />
	at com.jeehe.usercenter.client.impl.GoodsFacadeImpl.selGoodsPagesByCondition(Unknown Source)<br />
	at com.tuan.web.action.GoodsAction.selPastGoods(Unknown Source)<br />
	at sun.reflect.GeneratedMethodAccessor817.invoke(Unknown Source)<br />
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br />
	at java.lang.reflect.Method.invoke(Method.java:597)<br />
	at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:274)<br />
	at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:194)<br />
	at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:419)<br />
	at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:224)<br />
	at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1194)<br />
	at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)<br />
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:119)<br />
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:96)<br />
	at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:109)<br />
	at com.caucho.filters.GzipFilter.doFilter(GzipFilter.java:149)<br />
	at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89)<br />
	at org.tuckey.web.filters.urlrewrite.RuleChain.handleRewrite(RuleChain.java:176)<br />
	at org.tuckey.web.filters.urlrewrite.RuleChain.doRules(RuleChain.java:145)<br />
	at org.tuckey.web.filters.urlrewrite.UrlRewriter.processRequest(UrlRewriter.java:92)<br />
	at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:381)<br />
	at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89)<br />
	at com.tuan.web.filter.WebLogFilter.doFilter(Unknown Source)<br />
	at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89)<br />
	at com.tuan.web.filter.IpMarkerFilter.doFilter(Unknown Source)<br />
	at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89)<br />
	at com.tuan.web.util.SetCharsetFilter.doFilter(Unknown Source)<br />
	at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89)<br />
	at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:184)<br />
	at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:95)<br />
	at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287)<br />
	at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:794)<br />
	at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:729)<br />
	at com.caucho.network.listen.TcpSocketLink.handleRequest(TcpSocketLink.java:688)<br />
	at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:668)<br />
	at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:616)<br />
	at com.caucho.network.listen.AcceptTask.doTask(AcceptTask.java:104)<br />
	at com.caucho.network.listen.ConnectionReadTask.runThread(ConnectionReadTask.java:98)<br />
	at com.caucho.network.listen.ConnectionReadTask.run(ConnectionReadTask.java:81)<br />
	at com.caucho.network.listen.AcceptTask.run(AcceptTask.java:67)<br />
	at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164)<br />
	at com.caucho.env.thread.ResinThread.run(ResinThread.java:130)<br />
Caused by: com.ibatis.common.jdbc.exception.NestedSQLException:   <br />
--- The error occurred while applying a parameter map.  <br />
--- Check the selGoodsPagesByCondition-InlineParameterMap.  <br />
--- Check the statement (query failed).  <br />
--- Cause: com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: You have<br />
an error in your SQL syntax; check the manual that corresponds to your<br />
MySQL server version for the right syntax to use near &#039;-10,10&#039; at line<br />
1<br />
	at com.ibatis.sqlmap.engine.mapping.statement.MappedStatement.executeQueryWithCallback(MappedStatement.java:201)<br />
	at com.ibatis.sqlmap.engine.mapping.statement.MappedStatement.executeQueryForList(MappedStatement.java:139)<br />
	at com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.queryForList(SqlMapExecutorDelegate.java:567)<br />
	at com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.queryForList(SqlMapExecutorDelegate.java:541)<br />
	at com.ibatis.sqlmap.engine.impl.SqlMapSessionImpl.queryForList(SqlMapSessionImpl.java:118)<br />
	at org.springframework.orm.ibatis.SqlMapClientTemplate$3.doInSqlMapClient(SqlMapClientTemplate.java:298)<br />
	at org.springframework.orm.ibatis.SqlMapClientTemplate.execute(SqlMapClientTemplate.java:209)<br />
	at org.springframework.orm.ibatis.SqlMapClientTemplate.executeWithListResult(SqlMapClientTemplate.java:249)<br />
	at org.springframework.orm.ibatis.SqlMapClientTemplate.queryForList(SqlMapClientTemplate.java:296)<br />
	at com.jeehe.usercenter.dao.impl.GoodsDAOImpl.selGoodsPagesByCondition(Unknown Source)<br />
	at com.jeehe.usercenter.service.impl.GoodsServiceImpl.selGoodsPagesByCondition(Unknown Source)<br />
	at sun.reflect.GeneratedMethodAccessor819.invoke(Unknown Source)<br />
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br />
	at java.lang.reflect.Method.invoke(Method.java:597)<br />
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:310)<br />
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)<br />
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)<br />
	at org.springframework.remoting.support.RemoteInvocationTraceInterceptor.invoke(RemoteInvocationTraceInterceptor.java:70)<br />
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)<br />
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)<br />
	at $Proxy73.selGoodsPagesByCondition(Unknown Source)<br />
	at sun.reflect.GeneratedMethodAccessor818.invoke(Unknown Source)<br />
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br />
	at java.lang.reflect.Method.invoke(Method.java:597)<br />
	at org.springframework.remoting.support.RemoteInvocation.invoke(RemoteInvocation.java:205)<br />
	at org.springframework.remoting.support.DefaultRemoteInvocationExecutor.invoke(DefaultRemoteInvocationExecutor.java:38)<br />
	at org.springframework.remoting.support.RemoteInvocationBasedExporter.invoke(RemoteInvocationBasedExporter.java:78)<br />
	at org.springframework.remoting.rmi.RmiBasedExporter.invoke(RmiBasedExporter.java:72)<br />
	at org.springframework.remoting.rmi.RmiInvocationWrapper.invoke(RmiInvocationWrapper.java:72)<br />
	at sun.reflect.GeneratedMethodAccessor218.invoke(Unknown Source)<br />
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br />
	at java.lang.reflect.Method.invoke(Method.java:597)<br />
	at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:305)<br />
	at sun.rmi.transport.Transport$1.run(Transport.java:159)<br />
	at java.security.AccessController.doPrivileged(Native Method)<br />
	at sun.rmi.transport.Transport.serviceCall(Transport.java:155)<br />
	at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)<br />
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)<br />
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)<br />
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)<br />
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)<br />
	at java.lang.Thread.run(Thread.java:662)<br />
	at org.springframework.remoting.support.RemoteInvocationUtils.fillInClientStackTraceIfPossible(RemoteInvocationUtils.java:47)<br />
	at org.springframework.remoting.rmi.RmiClientInterceptor.doInvoke(RmiClientInterceptor.java:347)<br />
	at org.springframework.remoting.rmi.RmiClientInterceptor.invoke(RmiClientInterceptor.java:258)<br />
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)<br />
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)<br />
	at $Proxy39.selGoodsPagesByCondition(Unknown Source)<br />
	at com.jeehe.usercenter.client.impl.GoodsFacadeImpl.selGoodsPagesByCondition(Unknown Source)<br />
	at com.tuan.web.action.GoodsAction.selPastGoods(Unknown Source)<br />
	at sun.reflect.GeneratedMethodAccessor817.invoke(Unknown Source)<br />
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br />
	at java.lang.reflect.Method.invoke(Method.java:597)<br />
	at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:274)<br />
	at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:194)<br />
	at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:419)<br />
	at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:224)<br />
	at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1194)<br />
	at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)<br />
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:119)<br />
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:96)<br />
	at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:109)<br />
	at com.caucho.filters.GzipFilter.doFilter(GzipFilter.java:149)<br />
	at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89)<br />
	at org.tuckey.web.filters.urlrewrite.RuleChain.handleRewrite(RuleChain.java:176)<br />
	at org.tuckey.web.filters.urlrewrite.RuleChain.doRules(RuleChain.java:145)<br />
	at org.tuckey.web.filters.urlrewrite.UrlRewriter.processRequest(UrlRewriter.java:92)<br />
	at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:381)<br />
	at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89)<br />
	at com.tuan.web.filter.WebLogFilter.doFilter(Unknown Source)<br />
	at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89)<br />
	at com.tuan.web.filter.IpMarkerFilter.doFilter(Unknown Source)<br />
	at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89)<br />
	at com.tuan.web.util.SetCharsetFilter.doFilter(Unknown Source)<br />
	at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89)<br />
	at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:184)<br />
	at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:95)<br />
	at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287)<br />
	at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:794)<br />
	at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:729)<br />
	at com.caucho.network.listen.TcpSocketLink.handleRequest(TcpSocketLink.java:688)<br />
	at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:668)<br />
	at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:616)<br />
	at com.caucho.network.listen.AcceptTask.doTask(AcceptTask.java:104)<br />
	at com.caucho.network.listen.ConnectionReadTask.runThread(ConnectionReadTask.java:98)<br />
	at com.caucho.network.listen.ConnectionReadTask.run(ConnectionReadTask.java:81)<br />
	at com.caucho.network.listen.AcceptTask.run(AcceptTask.java:67)<br />
	at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164)<br />
	at com.caucho.env.thread.ResinThread.run(ResinThread.java:130)<br />
Caused by: com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: You have<br />
an error in your SQL syntax; check the manual that corresponds to your<br />
MySQL server version for the right syntax to use near &#039;-10,10&#039; at line<br />
1<br />
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:936)<br />
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2985)<br />
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1631)<br />
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1723)<br />
	at com.mysql.jdbc.Connection.execSQL(Connection.java:3256)<br />
	at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1313)<br />
	at com.mysql.jdbc.PreparedStatement.execute(PreparedStatement.java:874)<br />
	at com.mysql.jdbc.jdbc2.optional.PreparedStatementWrapper.execute(PreparedStatementWrapper.java:787)<br />
	at com.caucho.sql.UserPreparedStatement.execute(UserPreparedStatement.java:156)<br />
	at com.caucho.sql.UserPreparedStatement.execute(UserPreparedStatement.java:156)<br />
	at com.ibatis.sqlmap.engine.execution.SqlExecutor.executeQuery(SqlExecutor.java:185)<br />
	at com.ibatis.sqlmap.engine.mapping.statement.MappedStatement.sqlExecuteQuery(MappedStatement.java:221)<br />
	at com.ibatis.sqlmap.engine.mapping.statement.MappedStatement.executeQueryWithCallback(MappedStatement.java:189)<br />
	at com.ibatis.sqlmap.engine.mapping.statement.MappedStatement.executeQueryForList(MappedStatement.java:139)<br />
	at com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.queryForList(SqlMapExecutorDelegate.java:567)<br />
	at com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.queryForList(SqlMapExecutorDelegate.java:541)<br />
	at com.ibatis.sqlmap.engine.impl.SqlMapSessionImpl.queryForList(SqlMapSessionImpl.java:118)<br />
	at org.springframework.orm.ibatis.SqlMapClientTemplate$3.doInSqlMapClient(SqlMapClientTemplate.java:298)<br />
	at org.springframework.orm.ibatis.SqlMapClientTemplate.execute(SqlMapClientTemplate.java:209)<br />
	at org.springframework.orm.ibatis.SqlMapClientTemplate.executeWithListResult(SqlMapClientTemplate.java:249)<br />
	at org.springframework.orm.ibatis.SqlMapClientTemplate.queryForList(SqlMapClientTemplate.java:296)<br />
	at com.jeehe.usercenter.dao.impl.GoodsDAOImpl.selGoodsPagesByCondition(Unknown Source)<br />
	at com.jeehe.usercenter.service.impl.GoodsServiceImpl.selGoodsPagesByCondition(Unknown Source)<br />
	at sun.reflect.GeneratedMethodAccessor819.invoke(Unknown Source)<br />
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br />
	at java.lang.reflect.Method.invoke(Method.java:597)<br />
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:310)<br />
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)<br />
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)<br />
	at org.springframework.remoting.support.RemoteInvocationTraceInterceptor.invoke(RemoteInvocationTraceInterceptor.java:70)<br />
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)<br />
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)<br />
	at $Proxy73.selGoodsPagesByCondition(Unknown Source)<br />
	at sun.reflect.GeneratedMethodAccessor818.invoke(Unknown Source)<br />
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br />
	at java.lang.reflect.Method.invoke(Method.java:597)<br />
	at org.springframework.remoting.support.RemoteInvocation.invoke(RemoteInvocation.java:205)<br />
	at org.springframework.remoting.support.DefaultRemoteInvocationExecutor.invoke(DefaultRemoteInvocationExecutor.java:38)<br />
	at org.springframework.remoting.support.RemoteInvocationBasedExporter.invoke(RemoteInvocationBasedExporter.java:78)<br />
	at org.springframework.remoting.rmi.RmiBasedExporter.invoke(RmiBasedExporter.java:72)<br />
	at org.springframework.remoting.rmi.RmiInvocationWrapper.invoke(RmiInvocationWrapper.java:72)<br />
	at sun.reflect.GeneratedMethodAccessor218.invoke(Unknown Source)<br />
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br />
	at java.lang.reflect.Method.invoke(Method.java:597)<br />
	at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:305)<br />
	at sun.rmi.transport.Transport$1.run(Transport.java:159)<br />
	at java.security.AccessController.doPrivileged(Native Method)<br />
	at sun.rmi.transport.Transport.serviceCall(Transport.java:155)<br />
	at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)<br />
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)<br />
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)<br />
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)<br />
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)<br />
	at java.lang.Thread.run(Thread.java:662)<br />
	at org.springframework.remoting.support.RemoteInvocationUtils.fillInClientStackTraceIfPossible(RemoteInvocationUtils.java:47)<br />
	at org.springframework.remoting.rmi.RmiClientInterceptor.doInvoke(RmiClientInterceptor.java:347)<br />
	at org.springframework.remoting.rmi.RmiClientInterceptor.invoke(RmiClientInterceptor.java:258)<br />
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)<br />
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)<br />
	at $Proxy39.selGoodsPagesByCondition(Unknown Source)<br />
	at com.jeehe.usercenter.client.impl.GoodsFacadeImpl.selGoodsPagesByCondition(Unknown Source)<br />
	at com.tuan.web.action.GoodsAction.selPastGoods(Unknown Source)<br />
	at sun.reflect.GeneratedMethodAccessor817.invoke(Unknown Source)<br />
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br />
	at java.lang.reflect.Method.invoke(Method.java:597)<br />
	at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:274)<br />
	at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:194)<br />
	at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:419)<br />
	at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:224)<br />
	at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1194)<br />
	at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)<br />
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:119)<br />
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:96)<br />
	at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:109)<br />
	at com.caucho.filters.GzipFilter.doFilter(GzipFilter.java:149)<br />
	at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89)<br />
	at org.tuckey.web.filters.urlrewrite.RuleChain.handleRewrite(RuleChain.java:176)<br />
	at org.tuckey.web.filters.urlrewrite.RuleChain.doRules(RuleChain.java:145)<br />
	at org.tuckey.web.filters.urlrewrite.UrlRewriter.processRequest(UrlRewriter.java:92)<br />
	at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:381)<br />
	at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89)<br />
	at com.tuan.web.filter.WebLogFilter.doFilter(Unknown Source)<br />
	at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89)<br />
	at com.tuan.web.filter.IpMarkerFilter.doFilter(Unknown Source)<br />
	at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89)<br />
	at com.tuan.web.util.SetCharsetFilter.doFilter(Unknown Source)<br />
	at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89)<br />
	at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:184)<br />
	at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:95)<br />
	at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287)<br />
	at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:794)<br />
	at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:729)<br />
	at com.caucho.network.listen.TcpSocketLink.handleRequest(TcpSocketLink.java:688)<br />
	at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:668)<br />
	at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:616)<br />
	at com.caucho.network.listen.AcceptTask.doTask(AcceptTask.java:104)<br />
	at com.caucho.network.listen.ConnectionReadTask.runThread(ConnectionReadTask.java:98)<br />
	at com.caucho.network.listen.ConnectionReadTask.run(ConnectionReadTask.java:81)<br />
	at com.caucho.network.listen.AcceptTask.run(AcceptTask.java:67)<br />
	at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164)<br />
	at com.caucho.env.thread.ResinThread.run(ResinThread.java:130)</code></pre><p class='detail'><br />
<br />
晴天小铸<br />
<br />
PS:٩◕‿◕｡。人生苦短...及时享乐才是王道! </p>

									<h3 class="detailTitle">修复方案：</h3>
			<p class="detail">容错处理 </p>
										<h3 class="detailTitle">版权声明：转载请注明来源 <a style="font-weight:normal" href="http://www.wooyun.org/whitehats/路人甲" title="路人甲">路人甲</a>@<a style="font-weight:normal" href="http://www.wooyun.org/bugs/wooyun-2010-02560" title="窝窝团敏感信息泄露">乌云</a></h3>
		<hr align="center"/>

				
			<h2>漏洞回应</h2>
			
			
									<h3 class="detailTitle">厂商回应：</h3>
										<p class="detail">未能联系到厂商或者厂商积极拒绝</p>
																<p class="detail">漏洞Rank：2 (WooYun评价)</p>
												
					
		
<hr align="center" />
<script type="text/javascript">
var bugid="2560";
var bugRating="-3";
var myRating="";
var ratingCount="0";



function ShowBugRating(k){
	var ratingItems=$(".myrating span");
	$.each(ratingItems,function(i,n){
		var nk=parseInt($(n).attr("rel"));
		if(nk<=k){
			$(n).addClass("on");
		}else{
			$(n).removeClass("on");
		}
	});
	$(".myrating span").hover(
		function(){
			$("#ratingShow").html($(this).attr("data-title"));
		},
		function(){
			$("#ratingShow").html("");
		}
	);
}
$(document).ready(function(){
	if(myRating==""){
		var ratingItems=$(".myrating span");
		$(".myrating span").hover(
			function(){
				$(this).addClass("hover");
				var k=parseInt($(this).attr("rel"));
				$.each(ratingItems,function(i,n){
					var nk=parseInt($(n).attr("rel"));
					if(nk<k) $(n).addClass("on");
					if(nk>k) $(n).removeClass("on");
				});
				$("#ratingShow").html($(this).attr("data-title"));
			},
			function(){
				$(this).removeClass("hover");
				if($("#myRating").val()==""){
					$.each(ratingItems,function(i,n){
						$(n).removeClass("on");
					});
				}
				$("#ratingShow").html("");
			}
		);

		$(".myrating span").click(function(){
			var rating=$(this).attr("rel");
			var k=parseInt($(this).attr("rel"));
			$.post("/ajaxdo.php?module=bugrating",{"id":bugid,"rating":rating,"token":$("#token").val()},function(re){
				//消除操作绑定
				$(".myrating span").unbind();
				re=parseInt(re);
				switch(re){
					case 1:
						$("#ratingShow").html("评分成功");
						$("#ratingSpan").html(parseInt($("#ratingSpan").html())+1);
						$.each(ratingItems,function(i,n){
							var nk=parseInt($(n).attr("rel"));
							if(nk<=k){
								$(n).addClass("on");
							}else{
								$(n).removeClass("on");
							}
						});
						ShowBugRating(rating);
						break;
					case 2:
						$("#ratingShow").html("请先登录");
						break;
					case 4:
						$("#ratingShow").html("已对此漏洞进行过评分");
						break;
					case 6:
						$("#ratingShow").html("不能对自己发布的漏洞进行评分");
						break;
					default:break;
				}
			});
		});
	}else{
		if(ratingCount>2){
			ShowBugRating(bugRating);
		}else{
			ShowBugRating(-3);
		}
	}
});

</script>
<h3 class="detailTitle">漏洞评价：</h3>
                        </div>
                        </body>
                        </html>
